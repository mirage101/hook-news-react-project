{"ast":null,"code":"/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { fail } from '../util/assert';\nimport { DocumentKey } from './document_key';\n\nvar Document =\n/** @class */\nfunction () {\n  function Document(key, version, data, options) {\n    this.key = key;\n    this.version = version;\n    this.data = data;\n    this.hasLocalMutations = options.hasLocalMutations;\n  }\n\n  Document.prototype.field = function (path) {\n    return this.data.field(path);\n  };\n\n  Document.prototype.fieldValue = function (path) {\n    var field = this.field(path);\n    return field ? field.value() : undefined;\n  };\n\n  Document.prototype.value = function () {\n    return this.data.value();\n  };\n\n  Document.prototype.equals = function (other) {\n    return other instanceof Document && this.key.equals(other.key) && this.version.equals(other.version) && this.data.equals(other.data) && this.hasLocalMutations === other.hasLocalMutations;\n  };\n\n  Document.prototype.toString = function () {\n    return \"Document(\" + this.key + \", \" + this.version + \", \" + this.data.toString() + \", \" + (\"{hasLocalMutations: \" + this.hasLocalMutations + \"})\");\n  };\n\n  Document.compareByKey = function (d1, d2) {\n    return DocumentKey.comparator(d1.key, d2.key);\n  };\n\n  Document.compareByField = function (field, d1, d2) {\n    var v1 = d1.field(field);\n    var v2 = d2.field(field);\n\n    if (v1 !== undefined && v2 !== undefined) {\n      return v1.compareTo(v2);\n    } else {\n      return fail(\"Trying to compare documents on fields that don't exist\");\n    }\n  };\n\n  return Document;\n}();\n\nexport { Document };\n/**\n * A class representing a deleted document.\n * Version is set to 0 if we don't point to any specific time, otherwise it\n * denotes time we know it didn't exist at.\n */\n\nvar NoDocument =\n/** @class */\nfunction () {\n  function NoDocument(key, version) {\n    this.key = key;\n    this.version = version;\n  }\n\n  NoDocument.prototype.toString = function () {\n    return \"NoDocument(\" + this.key + \", \" + this.version + \")\";\n  };\n\n  NoDocument.prototype.equals = function (other) {\n    return other && other.version.equals(this.version) && other.key.equals(this.key);\n  };\n\n  NoDocument.compareByKey = function (d1, d2) {\n    return DocumentKey.comparator(d1.key, d2.key);\n  };\n\n  return NoDocument;\n}();\n\nexport { NoDocument };","map":null,"metadata":{},"sourceType":"module"}